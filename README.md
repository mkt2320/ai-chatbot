# Nestlé AI Chatbot

An AI-powered chatbot that answers user queries about content on the [Made with Nestlé](https://www.madewithnestle.ca/) website. This project includes dynamic web scraping, natural language summarization with contextual references, and a customizable GraphRAG module to enhance reasoning.


## Features

- Pop-out chatbot with custom icon, name, and avatars
- Typing indicator, scroll-to-bottom behavior, mobile responsiveness
- Real-time answers using scraped website content
- Summarized responses with reference links
- `/refresh` endpoint to dynamically update data from Nestlé’s website
- GraphRAG integration using `Neo4j` for structured context
- API-first design for easy integration and testing


## Technologies Used

- **Frontend** - React, TypeScript, Tailwind CSS, Vite                       

- **Backend** - FastAPI, Python, Uvicorn 

- **Web Scraping** - Playwright (`stealth mode + async crawling`)

- **Vector Store** - FAISS + SentenceTransformers (`all-MiniLM-L6-v2`)


- **GraphRAG** - Neo4j + Custom endpoints for node/edge creation & query 

- **Deployment** - Azure VM (Ubuntu 24.04 LTS), port 8000 exposed 


- **Others** - Axios, dotenv, OpenAI-compatible embedding abstraction  


## Local Setup Instructions

### Backend setup

    cd backend/
    python -m venv venv
    source venv/bin/activate
    pip install -r requirements.txt
    uvicorn main:app --host 0.0.0.0 --port 8000

#### Environment Variables
Create a `.env` file in the `backend/` folder with the following:
```bash
### Scraping mode: set to 'true' for background/headless browser
SCRAPER_HEADLESS=false

### HuggingFace/Local embedding model name
EMBED_MODEL=all-MiniLM-L6-v2

### OpenAI key for embeddings or summarization
OPENAI_API_KEY=your-api-key-here

### Neo4j Graph Database credentials - Needed to connect and enhance the GraphRAG functionality.
NEO4J_URI=neo4j+s://your-neo4j-uri
NEO4J_USERNAME=your-username
NEO4J_PASSWORD=your-password
```
**Note**: `OPENAI_API_KEY`, `NEO4J_URL`, `NEO4J_USERNAME` and `NEO4J_PASSWORD` are required for functionality and must be added manually in your .env file. Credentials are excluded from the repository via .gitignore.

- Get your key at: https://platform.openai.com/account/api-keys

- Create a free DB at: https://neo4j.com/cloud/platform/aura-graph/

#### Scraping + Embedding (Initial Setup or When Running `/refresh` endpoint)
Instead of running the steps manually, simply trigger:

    # Start backend first
    uvicorn main:app --host 0.0.0.0 --port 8000
    
    #Then call the /refresh endpoint via:
    curl -X POST http://<your-server-ip>:8000/refresh

    # or run it on Swagger

This will:
- Crawl Nestlé URLs
- Scrape content (using stealth Playwright)
- Generate embeddings
- Save them to scraped_data/ and embeddings/


### Frontend setup

    cd frontend/
    npm install
    npm run dev

Access at: http://localhost:5173


## Deployment on Azure

- Deployed to Azure VM using Ubuntu 24.04 LTS

- Backend runs via uvicorn on port 8000

- SSH and HTTP ports enabled

- Frontend is deployed using Netlify

## API Endpoints
- `/chat` - Accepts user query, returns answer + sources
- `/refresh` - Scrapes site content & rebuilds embeddings (background)
- `/graph/add-node` - Add a new node to GraphRAG
- `/graph/add-edge` - Create a relationship between nodes
- `/graph/query` - Query the graph for related facts

All APIs are Swagger-compatible. You can test with Postman or Swagger UI.

Swagger Docs available at: http://localhost:8000/docs

## GraphRAG Module
- **Engine**: Neo4j AuraDB (free tier)

- **Facts Injection**: Graph facts are auto-injected into /chat responses

- **Extensibility**: /graph/* APIs allow dynamic updates to the graph

- **Future Ready**: Supports CosmosDB by adapting the schema

## Known Limitations
- FAISS is used locally to meet budget limits. Azure Cognitive Search can be integrated by modifying vector_store.py.

- Frontend does not yet call `/refresh` automatically. It's triggered via Swagger.

- GraphRAG results are textual only (no visualization yet). The endpoints (`/graph/add-node`, `/graph/add-edge`, `/graph/query`) can be tested on swagger.



## Additional Notes
- `scraped_data/` and `crawled_data/` are autogenerated and ignored via `.gitignore`.
- Bot uses **stealth scraping** to bypass anti-bot protections (Playwright in **headless mode**).
- Summarization uses default summarizer from **HuggingFace** **pipeline** or placeholder logic.
